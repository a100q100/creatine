<!DOCTYPE html>
<html>
<head>

<script src="http://code.createjs.com/createjs-2013.12.12.min.js"></script>
<script src="../../src/creatine.js"></script>
<script src="../../src/Director.js"></script>
<script src="../../src/Scene.js"></script>
<script src="../../src/transitions/MoveIn.js"></script>
 
<script src="../base.js"></script>
<link href="../base.css" rel="stylesheet">

<script>
    var canvas = null;
    var stage = null;
    var director = null;
    var loader = null;
    var manifest = [
        {id:'morning', src:'../assets/morning.png'},
        {id:'evening', src:'../assets/evening.png'},
        {id:'night', src:'../assets/night.png'},
    ]

    var scenes = null;
    var transitions = null;
    var idxScene = null;
    var idxTransition = null;

    function init() {
        canvas = document.getElementById('canvas');
        stage = new createjs.Stage(canvas);
        loader = new createjs.LoadQueue(true);
        director = new creatine.Director(stage);

        createjs.Ticker.setFPS(60);
        createjs.Ticker.addEventListener('tick', onTick);

        director.push(new RandomScene(0, 0, 640, 480, 'Loading...'));

        loader.on('complete', onLoadComplete);
        loader.loadManifest(manifest);
    }

    function createScene(img) {
        var scene = new creatine.Scene();
        var background = new createjs.Bitmap(loader.getResult(img));
        scene.addChild(background);
        
        return scene;
    }

    function onLoadComplete(event) {
        stage.addEventListener('stagemousedown', onClick);

        transitions = [
            new creatine.transitions.MoveIn(creatine.LEFT),
            new creatine.transitions.MoveIn(creatine.TOP, createjs.Ease.bounceOut),
            new creatine.transitions.MoveIn(creatine.RIGHT, createjs.Ease.circOut, 1000),
            new creatine.transitions.MoveIn(creatine.BOTTOM, createjs.Ease.bounceOut, 500),
            new creatine.transitions.MoveIn(creatine.TOP_LEFT),
            new creatine.transitions.MoveIn(creatine.TOP_RIGHT),
            new creatine.transitions.MoveIn(creatine.BOTTOM_LEFT),
            new creatine.transitions.MoveIn(creatine.BOTTOM_RIGHT),
        ];

        scenes = [
            createScene('morning'),
            createScene('evening'),
            createScene('night'),
        ]

        idxScene = 0;
        idxTransition = 0;
        onClick();
    }

    function onTick() {
        stage.update();
    }

    function onClick() {
        if (director.inTransition) return;

        director.replace(
            scenes[idxScene],
            transitions[idxTransition]
        );

        idxScene++;
        if (idxScene >= scenes.length) {
            idxScene = 0;
        }
        idxTransition++;
        if (idxTransition >= transitions.length) {
            idxTransition = 0;
        }
    }
</script>
</head>
<body onLoad="init();">

<div class="title">Fade In Transitions</div>
<canvas id="canvas" width="640" height="480">alternate content</canvas>
<div class="info">
In this example, the FadeInOut, FadeIn, and FadeOut transitions are applied. Click on the canvas to replace the current scene.
</div>
</body>
</html>

















