<!DOCTYPE html>
<html>
<head>

<script src="http://code.createjs.com/createjs-2013.12.12.min.js"></script>
<script src="../../src/creatine.js"></script>
<script src="../../src/scene/Director.js"></script>
<script src="../../src/scene/Scene.js"></script>

<script src="../base.js"></script>
<link href="../base.css" rel="stylesheet">

<script>
    var canvas = null;
    var stage = null;
    var director = null;
    var counter = 1;

    function init() {
        canvas = document.getElementById('canvas');
        stage = new createjs.Stage(canvas);
        director = new creatine.Director(stage);

        // You can add an object directly to stage, just be careful!
        var bottomText = new createjs.Text('Bottom Text', '64px Arial', '#38B2CE');
        bottomText.textAlign = 'center';
        bottomText.x = 320;
        bottomText.y = 400;
        this.stage.addChild(bottomText);

        pushScene();

        var topText = new createjs.Text('Top Text', '64px Arial', '#333333');
        topText.textAlign = 'center';
        topText.x = 320;
        topText.y = 0
        this.stage.addChild(topText);

        createjs.Ticker.addEventListener('tick', onTick);
        document.addEventListener("keypress", onKeyPress);
    }

    function onTick(event) {
        stage.update();
    }

    function onKeyPress(event) {
        switch (event.keyCode) {
            case 114:
                replaceScene();
                break;
            case 112:
                pushScene();
                break;
            case 111:
                popScene();
                break;
            case 99:
                clearStack();
                break;
        }
    }

    function pushScene() {
        director.push(createScene());
    }

    function popScene() {
        director.pop();
    }

    function replaceScene() {
        director.replace(createScene());
    }

    function clearStack() {
        director.clearStack();
    }
    
    function createScene() {
        var scene = new RandomScene(
            Math.floor(Math.random()*320),
            Math.floor(Math.random()*240),
            Math.floor(Math.random()*270)+50,
            Math.floor(Math.random()*190)+50,
            counter
        );
        
        scene.id = counter;
        scene.on('scenepause', function() {
            console && console.log('Event: Scene '+scene.id+' Pause');
        });

        scene.on('sceneresume', function() {
            console && console.log('Event: Scene '+scene.id+' Resume');
        });

        scene.on('sceneenter', function() {
            console && console.log('Event: Scene '+scene.id+' Enter');
        });

        scene.on('sceneexit', function() {
            console && console.log('Event: Scene '+scene.id+' Exit');
        });

        counter++;

        return scene
    }

</script>
</head>
<body onLoad="init();">

<div class="title">Simple Director Actions</div>
<canvas id="canvas" width="640" height="480">alternate content</canvas>
<div class="info">

<ul>
    <li>R - To replace the current scene</li>
    <li>P - To push a new scene</li>
    <li>O - To pop a scene</li>
    <li>C - To clear the stack</li>
</ul>
</div>

</body>
</html>

















