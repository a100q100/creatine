<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Creatine Example: Jukebox</title>

    <script src="../_assets/libs/soundjs-NEXT.combined.js"></script>

    <script src="../src/creatine.js"></script>
    <script src="../src/helpers/functions.js"></script>
    <script src="../src/helpers/Jukebox.js"></script>
    
    <link href="../_assets/css/base.css" rel="stylesheet">
</head>

<body onLoad="init();">
    <br>
    <button onclick="play('sound1')">Play Audio 1</button>
    <button onclick="play('sound2')">Play Audio 2</button>
    <button onclick="play('sound3')">Play Audio 3</button>
    <button onclick="play('sound4')">Play Audio 4</button>
    <br>
    <br>
    <button onclick="play('group')">Play Group</button>
    <br>
    <br>
    <button onclick="jukebox.toogleMute()">Toogle Mute</button>
    <br>
    <br>
    <button onclick="invertVolume()">Invert Music/Sound Volume</button>
</body>
</html>

<script type="text/javascript">
    var jukebox = null;
    var music = null;

    function init() {
        // Register sounds on SoundJS
        createjs.Sound.registerSound("../_assets/sounds/mix.ogg", "mix", {
            audioSprite: [
                {id:"sound1", startTime:0, duration:500},
                {id:"sound2", startTime:500, duration:500},
                {id:"sound3", startTime:1000, duration: 500},
                {id:"sound4", startTime:1500, duration: 500}
            ]}
        );
        createjs.Sound.registerSound("../_assets/sounds/asturias.ogg", "asturias");

        // Create Jukebox
        jukebox = new creatine.Jukebox();
        jukebox.musicVolume = 0.4;
        jukebox.soundVolume = 1.0;

        // Create a sound groups
        jukebox.addSound('sound1', 'group');
        jukebox.addSound('sound2', 'group');
        jukebox.addSound('sound3', 'group');
        jukebox.addSound('sound4', 'group');

        // Play music when loaded
        m = new Audio("../_assets/sounds/asturias.ogg");
        m.addEventListener('canplaythrough', function() {
            music = jukebox.playMusic('asturias', 'none', 0, 0, -1);
        }, false);
    }

    function play(name) {
        jukebox.playSound(name);
    }

    function invertVolume() {
        var _v = jukebox.musicVolume;
        jukebox.musicVolume = jukebox.soundVolume;
        jukebox.soundVolume = _v;

        music.volume = jukebox.musicVolume;
    }
</script>